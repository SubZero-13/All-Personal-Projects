<div class="container">
  <form class="example-form" #registerForm="ngForm" (ngSubmit)="registerUser()">
    <h4 class="text-center heading">Sign Up</h4>
    <div class="form-feilds">
      <mat-form-field class="example-full-width" appearance="fill">
        <mat-label>First Name</mat-label>
        <input
          matInput
          type="text"
          [(ngModel)]="user.firstName"
          required
          name="firstName"
          #firstName="ngModel"
          [class.is-invalid]="firstName.invalid && firstName.touched"
        />
        <div *ngIf="firstName.errors && firstName.invalid && firstName.touched">
          <small class="text-danger" *ngIf="firstName.errors['required']"
            >First Name is required.</small
          >
        </div>
      </mat-form-field>

      <mat-form-field class="example-full-width" appearance="fill">
        <mat-label>Last Name</mat-label>
        <input
          matInput
          type="text"
          [(ngModel)]="user.lastName"
          required
          name="lastName"
          #lastName="ngModel"
          [class.is-invalid]="lastName.invalid && lastName.touched"
        />
        <div *ngIf="lastName.errors && lastName.invalid && lastName.touched">
          <small class="text-danger" *ngIf="lastName.errors['required']"
            >Last Name is required.</small
          >
        </div>
      </mat-form-field>

      <mat-form-field class="example-full-width" appearance="fill">
        <mat-label>Email</mat-label>
        <input
          matInput
          type="email"
          [(ngModel)]="user.email"
          required
          name="email"
          #email="ngModel"
          [class.is-invalid]="email.invalid && email.touched"
          pattern="[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$"
        />
        <div *ngIf="email.errors && email.invalid && email.touched">
          <small class="text-danger" *ngIf="email.errors['required']"
            >Email is required.</small
          >
          <small class="text-danger" *ngIf="email.errors['pattern']"
            >Invalid email format.</small
          >
        </div>
      </mat-form-field>

      <mat-form-field class="example-full-width" appearance="fill">
        <mat-label>Password</mat-label>
        <input
          matInput
          type="password"
          [(ngModel)]="user.password"
          required
          name="password"
          #password="ngModel"
          [class.is-invalid]="password.invalid && password.touched"
          pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()_+])[A-Za-z\d!@#$%^&*()_+]{8,}$"
        />
        <div *ngIf="password.errors && password.invalid && password.touched">
          <small class="text-danger" *ngIf="password.errors['required']"
            >Password is required.</small
          >
          <small class="text-danger" *ngIf="password.errors['pattern']"
            >Invalid password. It should contain at least 8 characters, one
            uppercase letter, one lowercase letter, one digit, and one special
            character.</small
          >
        </div>
      </mat-form-field>

      <mat-form-field class="example-full-width" appearance="fill">
        <mat-label>Confirm Password</mat-label>
        <input
          matInput
          type="password"
          ngModel
          required
          name="cpassword"
          #cpassword="ngModel"
          [class.is-invalid]="cpassword.invalid && cpassword.touched"
        />
        <small
          [class.d-none]="
            cpassword.value == password.value || cpassword.untouched
          "
          class="text-danger"
          >Password and Confirm Password must be same</small
        >
      </mat-form-field>
    </div>

    <div class="buttons">
      <button class="btn btn-primary sub-btn" type="submit" color="primary">
        Sign Up
      </button>

      <div class="newUser">
        <a routerLink="/login" class="link">Have an account already?</a>
      </div>
    </div>
  </form>
</div>
